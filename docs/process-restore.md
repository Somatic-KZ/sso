# Восстановление доступа к аккаунту

Процесс восстановления доступа к аккаунту состоить из двух обязательных вызовов API:

  * Создание пользователю токена на восстановление (СМС код, состоящий из четырех цифр)
  * Установка пароля аккаунту
  
Также есть необязательный вызов, проверяющий валидность токена на восстановление.

## Восстановление доступа по номеру телефона

Это обязательный шаг, генерирующий четырехзначный код и отсылающий его пользователю в виде SMS.

  * Метод: PUT 
  * URL: /api/v1/auth/recovery/phone
  * Тело: JSON
  * Минимальная структура запроса:
  
        {
            "phone": "87078275625"
        }
        
  * Код успешного ответа: 201
  * Тело успешного ответа содержит статус:
  
        {
          "status": "Recovery token was created successfully"
        }
  
  Все коды ошибок и детали определены в спецификации "swagger.yaml".
  
## Валидация токена на восстановление

Это опциональный шаг проверки валидности SMS кода.

  * Метод: PUT 
  * URL: /api/v1/auth/recovery/phone/token
  * Тело: JSON
  * Минимальная структура запроса:
  
        {
            "phone": "87078275625",
            "token": "1111"
        }
        
  * Код успешного ответа: 200
  * Тело успешного ответа содержит статус:
  
        {
          "status": "Token is valid"
        }
  
  Все коды ошибок и детали определены в спецификации "swagger.yaml".
  
## Установка пароля аккаунту

Это обязательный шаг, на котором пользователь устанавливает новый пароль своему аккаунту. После первого успешного вызова этого метода с валидным токеном на восстановление - токен перестает существовать.

  * Метод: PUT 
  * URL: /api/v1/auth/recovery/password
  * Тело: JSON
  * Минимальная структура запроса:
  
        {
            "phone": "87078275625",
            "token": "1111",
            "password": "secret"
        }
        
  * Код успешного ответа: 200
  * Тело успешного ответа содержит статус:
  
        {
          "status": "Your password was changed"
        }
  
  Все коды ошибок и детали определены в спецификации "swagger.yaml".